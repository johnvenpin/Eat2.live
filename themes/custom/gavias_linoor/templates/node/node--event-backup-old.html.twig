{%
  set classes = [
    'node',
    'node-detail',
    'node--type-' ~ node.bundle|clean_class,
    node.isPromoted() ? 'node--promoted',
    node.isSticky() ? 'node--sticky',
    not node.isPublished() ? 'node--unpublished',
    view_mode ? 'node--view-mode-' ~ view_mode|clean_class,
    'clearfix',
  ]
%}
{% set conBody  %}
  {{ content.body }}
{% endset %}



<!-- Start Display article for teaser page -->
{% if view_mode == 'teaser' %}
  <article{{ attributes.addClass(classes) }}>
    <div class="event-block">
      <div class="event-image text-center">
        {{ content.field_event_image }}
        <div class="date">
          <!-- <span class="day">{ node.field_start_time_date.value|date("m/d/Y") }}</span><span class="month">{ node.field_start_time_date.value|date("m/d/Y") }</span> -->

        </div>
      </div>
      <div class="event-content">
        <div class="event-info">
          <div class="title"><a href="{{ url }}" rel="bookmark">{{ label }}</a></div>
          <div class="event-meta">
            <span class="event-time">{{ node.field_event_time.value }} </span> <span class="event-address"> {{ node.field_event_address.value }} </span>
          </div>
          <div class="body">{{ conBody|striptags }}</div>
        </div>
      </div>
    </div>
  </article>

{% elseif view_mode == 'teaser_2' %}

  <div class="event-block-2">
    <div class="event-image text-center">
      {{ content.field_event_image }}
      <div class="event-date">

        <!-- {node.field_start_time_date.value }} -->

        {% if node.field_start_time_date.value %}
          <span class="month">{{ node.field_start_time_date.value|date('l j') }} </span>
          <span class="date">{{ node.field_start_time_date.value|date('M') }} </span>
        {% endif %}

      </div>
    </div>
    <div class="content-inner clearfix">
      <div class="event-content-inner">
        <div class="event-content">
          <h3{{ title_attributes.addClass('post-title') }}><a href="{{ url }}" rel="bookmark">{{ label }}</a></h3>
          <div class="event-meta">
            <span class="event-time">
                  {% if node.field_start_time_date.value %}
                    <span class="month">{{ node.field_start_time_date.value|date('g:i a') }} </span>
                  {% endif %}


          </span>&nbsp;&nbsp;-&nbsp;&nbsp;<span class="event-address"> {{ node.field_event_address.value }} </span>
          </div>
          <div class="event-line"></div>
          <div class="event-description">{{ conBody|striptags }}</div>
        </div>
      </div>
    </div>
  </div>

{% else %}

<div id="video-container" class="e2lcontainer">
      <div class="controls">
      <button id="vidButton" class="btn" value="{{ content.field_token.0 }}" onclick="joinCall()"> <i class="fas fa-video"></i> Join</button>
      <button class="btn"> <i class="fas fa-clock"></i><span id="count-down" ></span> </button>
      <button class="btn" id="fullscreen"> <i class="fas fa-expand-arrows-alt"></i></button>
        </div>
      <div id="renderer" >
        <!-- { content.field_event_image }} -->
      </div>
</div>

<article{{ attributes.addClass(classes.addClass('node-detail')) }}>
  <div class="post-block event-full">
    <div class="post-thumbnail">
     {{ title_prefix }}
         <h1{{ title_attributes.addClass('post-title') }}>{{ label }}</h1>
      {{ title_suffix }}
      <div >{{ conBody|striptags }}</div>
  </div>


    <div class="event-info">
      <h3>Details</h3>
      <div class="date clearfix">
        {% if node.field_start_time_date.value %}
        <p><i class="fas fa-clock"></i>{{ node.field_start_time_date.value|date("g:ia") }}  for {{ content.field_eating_duration.0 }} </p>
        <p><i class="fa fa-calendar"></i>{{ content.field_start_time_date.value | date("d M y")}}</p>
        <i class="fa fa-map-marker"></i>{{ content.field_event_address.0 }}
        <p><div id="status">Status</div></p>
        {% endif %}

    </div>

    <div class="post-content">

  <script>

//  full screen viewer
  document.addEventListener("click", function (event) {
  if (!event.target.matches("#fullscreen")) return;

  event.preventDefault();

  var fullscreenElement =
    document.fullscreenElement ||
    document.mozFullScreenElement ||
    document.webkitFullscreenElement ||
    document.msFullscreenElement;
  if (fullscreenElement) {
    exitFullscreen();
    document.getElementById("renderer").style.height = "35vh";
  } else {
    launchIntoFullscreen(document.getElementById("video-container"));
    document.getElementById("renderer").style.height = "100%";
  }
});

function launchIntoFullscreen(element) {
  if (element.requestFullscreen) {
    element.requestFullscreen();
  } else if (element.mozRequestFullScreen) {
    element.mozRequestFullScreen();
  } else if (element.webkitRequestFullscreen) {
    element.webkitRequestFullscreen();
  } else if (element.msRequestFullscreen) {
    element.msRequestFullscreen();
  } else { element.classList.toggle("fullscreen");
  }
}

function exitFullscreen() {
  if (document.exitFullscreen) {
    document.exitFullscreen();
  } else if (document.mozCancelFullScreen) {
    document.mozCancelFullScreen();
  } else if (document.webkitExitFullscreen) {
    document.webkitExitFullscreen();
  }
}
  // Set the date we're counting down to
  var countDownDate = new Date("{{ content.field_start_time_date.value | date("M,d,Y,H:i") }}").getTime();


//  var countDownDate = new Date("Jan 29, 2022 21:00:00").getTime();

  // Update the count down every 1 second
  var x = setInterval(function() {

    // Get today's date and time
    var now = new Date().getTime();

    // Find the distance between now and the count down date
    var distance = countDownDate - now;

    // Time calculations for days, hours, minutes and seconds
    var days = Math.floor(distance / (1000 * 60 * 60 * 24));
    var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    var seconds = Math.floor((distance % (1000 * 60)) / 1000);

    document.getElementById(‘renderer’).style.backgroundImage = '{{ content.field_event_image}}';

    // Display the result in the element with id="demo"
    document.getElementById("count-down").innerHTML = hours + "h "
    + minutes + "m " + seconds + "s ";

    // If the count down is finished, write some text
    if (distance < 0) {
      clearInterval(x);
      document.getElementById("count-down").innerHTML = "EXPIRED";
    }
  }, 1000);
  </script>



























      <div{{ content_attributes.addClass('node__content', 'clearfix') }}>
        <!-- { content|without('field_event_image', 'field_event_start', 'field_event_address', 'field_event_time','field_event_map', 'field_token', 'comment') }} -->
      </div>
      <script type="text/javascript" src="//maps.google.com/maps/api/js?sensor=true&key=AIzaSyDWg9eU2MO9E0PF1ZMw9sFVJoPVU4Z6s3o"></script>
      <script type="text/javascript" src="{{theme_uri}}/vendor/gmap3.js"></script>
      <script type="text/javascript" src="{{theme_uri}}/vendor/jquery.ui.map.min.js"></script>


      {% if content.comment %}
        <div id="node-single-comment">
          {{ content.comment }}
        </div>
      {% endif %}

    </div>

  </div>

</article>

<!-- End Display article for detail page -->
{% endif %}
